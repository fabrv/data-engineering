version: "3.9"

services:
  mage:
    build: .
    container_name: mage_citibike
    ports:
      - "6789:6789"
    volumes:
      - ./:/app/citibike_project
      - ./data:/app/data
      - ./database.db:/app/database.db
    environment:
      - PYTHONPATH=/app/citibike_project
      - DATA_DIR=/app/data
      - DB_PATH=/app/database.db
      - SLACK_WEBHOOK_URL=https://hooks.slack.com/services/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
    restart: unless-stopped

  dashboard:
    build: ./dashboard
    container_name: citibike_dashboard
    ports:
      - "8501:8501"
    volumes:
      - ./data:/app/data
    depends_on:
      - mage
    restart: unless-stopped
